@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 222.2 84% 4.9%;

    --card: 0 0% 100%;
    --card-foreground: 222.2 84% 4.9%;

    --popover: 0 0% 100%;
    --popover-foreground: 222.2 84% 4.9%;

    --primary: 222.1 83.2% 9.8%;
    --primary-foreground: 210 40% 98%;

    --secondary: 210 22% 20%;
    --secondary-foreground: 210 40% 98%;

    --muted: 210 40% 96.1%;
    --muted-foreground: 215.4 16.3% 46.9%;

    --accent: 210 40% 96.1%;
    --accent-foreground: 222.2 47.4% 11.2%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;

    --border: 214.3 31.8% 91.4%;
    --input: 214.3 31.8% 91.4%;

    --ring: 222.1 83.2% 9.8%;

    --radius: 0.5rem;
  }

  .dark {
    --background: 222.2 84% 4.9%;
    --foreground: 210 40% 98%;

    --card: 222.2 84% 4.9%;
    --card-foreground: 210 40% 98%;

    --popover: 222.2 84% 4.9%;
    --popover-foreground: 210 40% 98%;

    --primary: 210 40% 98%;
    --primary-foreground: 222.1 83.2% 9.8%;

    --secondary: 217.2 32.6% 17.5%;
    --secondary-foreground: 210 40% 98%;

    --muted: 212.5 26.8% 14.1%;
    --muted-foreground: 215 20.2% 65.1%;

    --accent: 217.2 32.6% 17.5%;
    --accent-foreground: 210 40% 98%;

    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;

    --border: 217.2 32.6% 17.5%;
    --input: 217.2 32.6% 17.5%;

    --ring: 212.1 63.2% 16.6%;
  }
}

@layer utilities {
  .border-border {
    border-color: hsl(var(--border));
  }
  .text-card-foreground {
    color: hsl(var(--card-foreground));
  }
  .text-popover-foreground {
    color: hsl(var(--popover-foreground));
  }
  .text-muted-foreground {
    color: hsl(var(--muted-foreground));
  }
  .ring-offset-background {
    ring-offset-color: hsl(var(--background));
  }
  scrollbar-thin {
    scrollbar-width: thin;
  }
  scrollbar-track-rounded {
    scrollbar-track-radius: 0.5rem; /* Assuming you're using default radius */
  }
  scrollbar-thumb-rounded {
    scrollbar-thumb-radius: 0.5rem; /* Assuming you're using default radius */
  }
  scrollbar-track-color {
    scrollbar-track-color: hsl(var(--muted));
  }
  scrollbar-thumb-color {
    scrollbar-thumb-color: hsl(var(--secondary));
  }
}

@supports (scrollbar-width: thin) {
  * {
    scrollbar-width: thin;
    scrollbar-color: hsl(var(--secondary)) hsl(var(--muted));
  }
}

@supports not (scrollbar-width: thin) {
  *::-webkit-scrollbar {
    width: 8px;
  }

  *::-webkit-scrollbar-track {
    background-color: hsl(var(--muted));
    border-radius: 0.5rem;
  }

  *::-webkit-scrollbar-thumb {
    background-color: hsl(var(--secondary));
    border-radius: 0.5rem;
  }
}

/* Ajustements pour mobile */
@media (max-width: 640px) {
  .container {
    padding-bottom: 5rem;
  }

  /* Ajustement pour le header sur mobile */
  body {
    padding-top: 0; /* Supprimé env(safe-area-inset-top, 0) */
  }

  /* Ajuster l'espace sous le header */
  main {
    padding-top: 3.5rem !important; /* Réduit de 4rem à 3.5rem */
  }

  /* Assurer que le footer ne chevauche pas le contenu */
  footer {
    position: relative;
    margin-top: 2rem;
  }

  /* Supprimer les marges inutiles */
  header {
    margin-top: 0 !important;
    margin-bottom: 0 !important;
  }
}

/* Ajout de styles pour améliorer la compatibilité entre navigateurs */
html {
  -webkit-text-size-adjust: 100%; /* Empêche l'agrandissement du texte en mode paysage sur iOS */
  -moz-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
  text-size-adjust: 100%;
}

/* Correction pour les problèmes de flexbox sur Safari */
@supports (-webkit-touch-callout: none) {
  .flex {
    display: -webkit-box;
    display: -webkit-flex;
    display: flex;
  }

  .flex-col {
    -webkit-box-orient: vertical;
    -webkit-box-direction: normal;
    -webkit-flex-direction: column;
    flex-direction: column;
  }

  .flex-row {
    -webkit-box-orient: horizontal;
    -webkit-box-direction: normal;
    -webkit-flex-direction: row;
    flex-direction: row;
  }

  .items-center {
    -webkit-box-align: center;
    -webkit-align-items: center;
    align-items: center;
  }

  .justify-center {
    -webkit-box-pack: center;
    -webkit-justify-content: center;
    justify-content: center;
  }

  .justify-between {
    -webkit-box-pack: justify;
    -webkit-justify-content: space-between;
    justify-content: space-between;
  }
}

/* Fix pour les problèmes de position fixed sur iOS */
@supports (-webkit-overflow-scrolling: touch) {
  .fixed {
    position: fixed;
    width: 100%;
    -webkit-backface-visibility: hidden;
    /* Ajout pour éviter le décalage sur iOS */
    top: 0;
    left: 0;
    right: 0;
  }
}

/* Amélioration de la lisibilité du texte sur tous les navigateurs */
body {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  /* Ajout pour éviter les problèmes de marge sur iOS */
  margin: 0;
  padding: 0;
}

/* Correction pour les problèmes d'affichage des inputs sur iOS */
input,
textarea,
button,
select {
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  border-radius: var(--radius);
}

/* Correction pour Firefox */
@-moz-document url-prefix() {\
  select {\
    text-indent: 0.01px;
    text-overflow: '';
    padding-right: 1rem;
  }
}

/* Correction pour Edge */
@supports (-ms-ime-align: auto) {
  .grid {
    display: -ms-grid;
    display: grid;
  }
}

/* Ajout de styles spécifiques pour iOS pour corriger le header */
@supports (-webkit-touch-callout: none) {
  /* iOS only */
  .fixed {
    padding-top: constant(safe-area-inset-top); /* iOS 11.0 */
    padding-top: env(safe-area-inset-top); /* iOS 11.2+ */
  }

  /* Correction pour le contenu principal sur iOS */
  main {
    padding-top: calc(3.5rem + env(safe-area-inset-top, 0)) !important;
  }

  /* Éviter le débordement horizontal */
  body {
    width: 100%;
    overflow-x: hidden;
    position: relative;
  }
}
